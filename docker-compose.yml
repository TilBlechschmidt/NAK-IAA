version: "3.8"

services:
    proxy:
        image: caddy:2.1.1-alpine
        ports:
            - "2020:2020"
        networks:
            - services
            - default
        volumes:
            - $PWD/Caddyfile:/etc/caddy/Caddyfile
    frontend:
        build:
            context: .
            dockerfile: frontend/Dockerfile
        ports:
            - "5000:5000"
        networks:
            - services
        depends_on:
            - backend
    backend:
        build:
            context: .
            dockerfile: backend/Dockerfile
        environment:
            - "SERVER_SERVLET_CONTEXT_PATH=/api"
        ports:
            - "8080:8080"
        networks:
            - services

networks:
    services:
